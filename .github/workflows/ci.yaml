name: Docker image sync to Tencent

on:
  push:
    paths:
      - 'images.json'

env:
  REGISTRY_URL: "ccr.ccs.tencentyun.com/xiaoningmeng"

jobs:
  sync:
    runs-on: ubuntu-22.04  # 推荐使用最新 LTS
    steps:
      - uses: actions/checkout@v4

      - name: Sync Docker images
        run: python uploader.py ${{ secrets.TENCENTDOCKER_USER }} ${{ secrets.TENCENTDOCKER_PASSWD }} ${{ env.REGISTRY_URL }}

      # 如果后续需要上传日志或报告，可保留 artifact 步骤；否则可注释或删除
      # - uses: actions/upload-artifact@v4
      #   if: always()
      #   with:
      #     name: sync-log
      #     path: ...  # 如有生成文件才需要
